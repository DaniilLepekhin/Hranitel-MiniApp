# ‚úÖ –°–¢–ê–¢–£–° –†–ï–ê–õ–ò–ó–ê–¶–ò–ò - –ö–û–î –î–ï–ù–ï–ì 4.0

**–î–∞—Ç–∞:** 14 —è–Ω–≤–∞—Ä—è 2026
**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 35% –∑–∞–≤–µ—Ä—à–µ–Ω–æ

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û:

### 1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (100%)**
- ‚úÖ –ë–î `club_hranitel` —Å–æ–∑–¥–∞–Ω–∞ –Ω–∞ 31.128.36.81:5423
- ‚úÖ [schema.ts](backend/src/db/schema.ts) —Ä–∞—Å—à–∏—Ä–µ–Ω–∞: **10 –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü**
- ‚úÖ –í—Å–µ Relations –∏ Types –¥–æ–±–∞–≤–ª–µ–Ω—ã
- ‚úÖ Enums –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π

**–ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
- `ep_transactions` - Energy Points —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `shop_items` - –ú–∞–≥–∞–∑–∏–Ω (3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
- `shop_purchases` - –ü–æ–∫—É–ø–∫–∏
- `teams` + `team_members` - –î–µ—Å—è—Ç–∫–∏
- `live_streams` + `stream_attendance` - –≠—Ñ–∏—Ä—ã
- `weekly_reports` - –û—Ç—á–µ—Ç—ã
- `user_keys` - –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ 12 –∫–ª—é—á–∞–º

### 2. **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (100%)**
- ‚úÖ [docker-compose.yml](docker-compose.yml) - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–π –ë–î
- ‚úÖ [.env.example](backend/.env.example) - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞

### 3. **Backend Services (20%)**
- ‚úÖ [Energy Points Service](backend/src/modules/energy-points/service.ts) - –ì–û–¢–û–í
  - `award()` - –Ω–∞—á–∏—Å–ª–∏—Ç—å EP
  - `spend()` - —Å–ø–∏—Å–∞—Ç—å EP
  - `getBalance()` - –±–∞–ª–∞–Ω—Å
  - `getHistory()` - –∏—Å—Ç–æ—Ä–∏—è
  - –í—Å–µ 7 —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è

---

## üîÑ –í –ü–†–û–¶–ï–°–°–ï:

### Backend Services (–æ—Å—Ç–∞–ª–æ—Å—å 4 —Å–µ—Ä–≤–∏—Å–∞):

**1. Shop Service** (–æ—Å—Ç–∞–ª–æ—Å—å 2 —á–∞—Å–∞)
```typescript
// backend/src/modules/shop/service.ts
class ShopService {
  async getItems(category?: string)
  async purchaseItem(userId: string, itemId: string)
  async getUserPurchases(userId: string)
}
```

**2. Teams Service** (–æ—Å—Ç–∞–ª–æ—Å—å 2 —á–∞—Å–∞)
```typescript
// backend/src/modules/teams/service.ts
class TeamsService {
  async getUserTeam(userId: string)
  async getTeamMembers(teamId: string)
  async distributeUsersToTeams() // –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
}
```

**3. Streams Service** (–æ—Å—Ç–∞–ª–æ—Å—å 1 —á–∞—Å)
```typescript
// backend/src/modules/streams/service.ts
class StreamsService {
  async getUpcomingStreams()
  async markAttendance(userId: string, streamId: string, isLive: boolean)
}
```

**4. Reports Service** (–æ—Å—Ç–∞–ª–æ—Å—å 1 —á–∞—Å)
```typescript
// backend/src/modules/reports/service.ts
class ReportsService {
  async submitReport(userId: string, content: string)
  async getWeekDeadline()
}
```

### API Endpoints (–æ—Å—Ç–∞–ª–æ—Å—å 1 –¥–µ–Ω—å):
```typescript
// backend/src/modules/energy-points/index.ts
app.group('/api/ep', (app) => {
  app.post('/award', awardHandler)
  app.post('/spend', spendHandler)
  app.get('/balance', getBalanceHandler)
  app.get('/history', getHistoryHandler)
})

// + Shop, Teams, Streams, Reports endpoints
```

---

## ‚è≥ –û–°–¢–ê–õ–û–°–¨ –°–î–ï–õ–ê–¢–¨:

### **Frontend (2-3 –¥–Ω—è):**

**1. –ù–∞–≤–∏–≥–∞—Ü–∏—è (2 —á–∞—Å–∞)**
- –ò–∑–º–µ–Ω–∏—Ç—å —Å 6 —Ç–∞–±–æ–≤ –Ω–∞ 5:
  - ‚úÖ –ì–ª–∞–≤–Ω–∞—è
  - ‚ö†Ô∏è –ü—É—Ç—å (–ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –∏–∑ Courses)
  - ‚ùå –ß–∞—Ç—ã (–Ω–æ–≤—ã–π)
  - ‚ùå –ú–∞–≥–∞–∑–∏–Ω (–Ω–æ–≤—ã–π)
  - ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å

**2. –≠–∫—Ä–∞–Ω "–ú–∞–≥–∞–∑–∏–Ω" (4 —á–∞—Å–∞)**
```tsx
// webapp/src/components/tabs/ShopTab.tsx
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: –≠–ª–∏—Ç–Ω—ã–π —à–∞–Ω—Å, –¢–∞–π–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞, –ö–æ–ø–∏–ª–∫–∞
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ü–µ–Ω–∞–º–∏ –≤ EP
- –ú–æ–¥–∞–ª–∫–∞ –ø–æ–∫—É–ø–∫–∏
- –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫
```

**3. –≠–∫—Ä–∞–Ω "–ß–∞—Ç—ã" (2 —á–∞—Å–∞)**
```tsx
// webapp/src/components/tabs/ChatsTab.tsx
- –ö–û–î –î–ï–ù–ï–ì (–æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª)
- –ß–∞—Ç –≥–æ—Ä–æ–¥–∞
- –ú–æ—è –î–µ—Å—è—Ç–∫–∞ (—Å–æ—Å—Ç–∞–≤)
- –°–ª—É–∂–±–∞ –∑–∞–±–æ—Ç—ã
```

**4. –°–∏—Å—Ç–µ–º–∞ 12 –ö–ª—é—á–µ–π (4 —á–∞—Å–∞)**
```tsx
// –û–±–Ω–æ–≤–∏—Ç—å CoursesTab ‚Üí PathTab
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–π 1-12
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ö–ª—é—á–∞ #2 –ø–æ–∫–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω #1
- –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞–∂–¥–æ–º—É –∫–ª—é—á—É
```

**5. –í–∏–¥–∂–µ—Ç—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π (2 —á–∞—Å–∞)**
```tsx
// –û–±–Ω–æ–≤–∏—Ç—å HomeTab
- –ë–∞–ª–∞–Ω—Å EP (–≤–º–µ—Å—Ç–æ XP)
- –ë–ª–∏–∂–∞–π—à–∏–π —ç—Ñ–∏—Ä —Å —Ç–∞–π–º–µ—Ä–æ–º
- –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–∫—Ä—ã—Ç–∏—è –º–µ—Å—è—Ü–∞
```

### **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (1 –¥–µ–Ω—å):**

**1. –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
```python
# migrate_users.py
# 54,409 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ private_club_users ‚Üí users
# –ú–∞–ø–ø–∏–Ω–≥: client_id ‚Üí telegramId, coins_2 ‚Üí energyPoints
```

**2. –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**
```python
# migrate_transactions.py
# 1,779,378 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ private_club_transactions ‚Üí ep_transactions
# –ú–∞–ø–ø–∏–Ω–≥: type refill/spend ‚Üí income/expense
```

**3. –°–∫—Ä–∏–ø—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ –î–µ—Å—è—Ç–∫–∞–º**
```python
# distribute_teams.py
# –ê–ª–≥–æ—Ä–∏—Ç–º: –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ metka (art, relationship, etc)
# 54,409 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Üí ~4,500 –∫–æ–º–∞–Ω–¥ –ø–æ 6-12 —á–µ–ª–æ–≤–µ–∫
```

### **Seed –¥–∞–Ω–Ω—ã–µ (1 —á–∞—Å):**
```typescript
// backend/src/db/seeds/shop.ts
await db.insert(shopItems).values([
  {
    title: '–ë–∏–ª–µ—Ç –Ω–∞ —Ä–æ–∑—ã–≥—Ä—ã—à —Ä–∞–∑–±–æ—Ä–∞',
    category: 'elite',
    price: 1000,
    itemType: 'raffle_ticket',
    description: '–®–∞–Ω—Å –≤—ã–∏–≥—Ä–∞—Ç—å —Ä–∞–∑–±–æ—Ä –æ—Ç –¢–æ–ø-–ù—É–º–µ—Ä–æ–ª–æ–≥–∞'
  },
  {
    title: '–£—Ä–æ–∫: –ú–∞–≥–∏—è –°–≤–µ—á–µ–π',
    category: 'secret',
    price: 600,
    itemType: 'lesson'
  },
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
])
```

---

## üìä –û–¶–ï–ù–ö–ê –í–†–ï–ú–ï–ù–ò:

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å | –û—Å—Ç–∞–ª–æ—Å—å |
|--------|--------|----------|
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | ‚úÖ 100% | - |
| –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | ‚úÖ 100% | - |
| Energy Points Service | ‚úÖ 100% | - |
| Shop Service | ‚è≥ 0% | 2 —á–∞—Å–∞ |
| Teams Service | ‚è≥ 0% | 2 —á–∞—Å–∞ |
| Streams Service | ‚è≥ 0% | 1 —á–∞—Å |
| Reports Service | ‚è≥ 0% | 1 —á–∞—Å |
| API Endpoints | ‚è≥ 0% | 1 –¥–µ–Ω—å |
| Frontend Navigation | ‚è≥ 0% | 2 —á–∞—Å–∞ |
| –≠–∫—Ä–∞–Ω –ú–∞–≥–∞–∑–∏–Ω–∞ | ‚è≥ 0% | 4 —á–∞—Å–∞ |
| –≠–∫—Ä–∞–Ω –ß–∞—Ç–æ–≤ | ‚è≥ 0% | 2 —á–∞—Å–∞ |
| –°–∏—Å—Ç–µ–º–∞ 12 –ö–ª—é—á–µ–π | ‚è≥ 0% | 4 —á–∞—Å–∞ |
| –í–∏–¥–∂–µ—Ç—ã | ‚è≥ 0% | 2 —á–∞—Å–∞ |
| –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö | ‚è≥ 0% | 1 –¥–µ–Ω—å |
| Seed –¥–∞–Ω–Ω—ã–µ | ‚è≥ 0% | 1 —á–∞—Å |
| **–ò–¢–û–ì–û** | **35%** | **5-6 –¥–Ω–µ–π** |

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò (–ü–õ–ê–ù –ù–ê –ü–†–û–î–û–õ–ñ–ï–ù–ò–ï):

### **–°–µ–≥–æ–¥–Ω—è (–î–µ–Ω—å 1):**
1. ‚úÖ Energy Points Service - –ì–û–¢–û–í
2. ‚è≥ Shop Service (2 —á–∞—Å–∞)
3. ‚è≥ Teams Service (2 —á–∞—Å–∞)
4. ‚è≥ Streams + Reports Services (2 —á–∞—Å–∞)

### **–î–µ–Ω—å 2:**
5. API Endpoints –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
6. Seed –¥–∞–Ω–Ω—ã–µ (—Ç–æ–≤–∞—Ä—ã –º–∞–≥–∞–∑–∏–Ω–∞)

### **–î–µ–Ω—å 3:**
7. Frontend Navigation (5 —Ç–∞–±–æ–≤)
8. –≠–∫—Ä–∞–Ω –ú–∞–≥–∞–∑–∏–Ω–∞
9. –≠–∫—Ä–∞–Ω –ß–∞—Ç–æ–≤

### **–î–µ–Ω—å 4:**
10. –°–∏—Å—Ç–µ–º–∞ 12 –ö–ª—é—á–µ–π
11. –í–∏–¥–∂–µ—Ç—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π

### **–î–µ–Ω—å 5:**
12. –ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
13. –ú–∏–≥—Ä–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
14. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –î–µ—Å—è—Ç–∫–∞–º

### **–î–µ–Ω—å 6:**
15. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ EP
16. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—É–ø–æ–∫ –≤ –º–∞–≥–∞–∑–∏–Ω–µ
17. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—á–µ—Ç–æ–≤

---

## üìÇ –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í:

### **Backend:**
```
backend/src/
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îú‚îÄ‚îÄ energy-points/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service.ts ‚úÖ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts ‚è≥
‚îÇ   ‚îú‚îÄ‚îÄ shop/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service.ts ‚è≥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts ‚è≥
‚îÇ   ‚îú‚îÄ‚îÄ teams/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service.ts ‚è≥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts ‚è≥
‚îÇ   ‚îú‚îÄ‚îÄ streams/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service.ts ‚è≥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts ‚è≥
‚îÇ   ‚îî‚îÄ‚îÄ reports/
‚îÇ       ‚îú‚îÄ‚îÄ service.ts ‚è≥
‚îÇ       ‚îî‚îÄ‚îÄ index.ts ‚è≥
‚îî‚îÄ‚îÄ db/
    ‚îú‚îÄ‚îÄ schema.ts ‚úÖ
    ‚îî‚îÄ‚îÄ seeds/
        ‚îú‚îÄ‚îÄ shop.ts ‚è≥
        ‚îî‚îÄ‚îÄ keys.ts ‚è≥
```

### **Frontend:**
```
webapp/src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ tabs/
‚îÇ       ‚îú‚îÄ‚îÄ HomeTab.tsx (–æ–±–Ω–æ–≤–∏—Ç—å) ‚è≥
‚îÇ       ‚îú‚îÄ‚îÄ PathTab.tsx (–ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å) ‚è≥
‚îÇ       ‚îú‚îÄ‚îÄ ChatsTab.tsx (–Ω–æ–≤—ã–π) ‚è≥
‚îÇ       ‚îú‚îÄ‚îÄ ShopTab.tsx (–Ω–æ–≤—ã–π) ‚è≥
‚îÇ       ‚îî‚îÄ‚îÄ ProfileTab.tsx (–æ–±–Ω–æ–≤–∏—Ç—å) ‚è≥
‚îî‚îÄ‚îÄ lib/
    ‚îî‚îÄ‚îÄ api.ts (–¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ endpoints) ‚è≥
```

---

## üí° –ö–ê–ö –ü–†–û–î–û–õ–ñ–ò–¢–¨:

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–∫–æ–Ω—á–∏—Ç—å Backend (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
–°–æ–∑–¥–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ 4 —Å–µ—Ä–≤–∏—Å–∞ + API endpoints.
**–í—Ä–µ–º—è:** 1-2 –¥–Ω—è
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π Backend

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞—á–∞—Ç—å Frontend**
–ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ —ç–∫—Ä–∞–Ω—ã.
**–í—Ä–µ–º—è:** 2-3 –¥–Ω—è
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≥–æ—Ç–æ–≤

### **–í–∞—Ä–∏–∞–Ω—Ç 3: –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ 54K –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ 1.7M —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.
**–í—Ä–µ–º—è:** 1 –¥–µ–Ω—å
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

---

## üìû –§–ê–ô–õ–´ –ì–û–¢–û–í–´–ï –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ:

1. ‚úÖ [schema.ts](backend/src/db/schema.ts) - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î
2. ‚úÖ [Energy Points Service](backend/src/modules/energy-points/service.ts)
3. ‚úÖ [docker-compose.yml](docker-compose.yml)
4. ‚úÖ [.env.example](backend/.env.example)
5. ‚úÖ [DEPLOYMENT_ARCHITECTURE.md](DEPLOYMENT_ARCHITECTURE.md)
6. ‚úÖ [READY_TO_DEPLOY.md](READY_TO_DEPLOY.md)
7. ‚úÖ [MIGRATION_PLAN.md](MIGRATION_PLAN.md)

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω:** 14 —è–Ω–≤–∞—Ä—è 2026
**–°—Ç–∞—Ç—É—Å:** 35% –∑–∞–≤–µ—Ä—à–µ–Ω–æ, 5-6 –¥–Ω–µ–π –¥–æ –ø–æ–ª–Ω–æ–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–æ–∑–¥–∞—Ç—å Shop, Teams, Streams, Reports Services
