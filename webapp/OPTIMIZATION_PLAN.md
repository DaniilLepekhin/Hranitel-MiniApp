# üöÄ –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –†–∞–∑–º–µ—Ä—ã –±–∞–Ω–¥–ª–æ–≤:
- **First Load JS:** 102 KB (shared)
- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:** 263 KB total (144 KB + 102 KB shared)
- **–°–∞–º–∞—è —Ç—è–∂–µ–ª–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:** /video/[videoId] - 125 KB

### –ü—Ä–æ–±–ª–µ–º—ã –Ω–∞–π–¥–µ–Ω—ã:
1. ‚ùå **51 –ú–ë –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö backup –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
2. ‚ö†Ô∏è –ù–µ—Ç font preloading (—à—Ä–∏—Ñ—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ–∑–¥–Ω–æ)
3. ‚ö†Ô∏è –ù–µ—Ç code splitting –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
4. ‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

---

## ‚úÖ –ß–¢–û –£–ñ–ï –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–û:

1. ‚úÖ `optimizePackageImports` –¥–ª—è lucide-react, framer-motion
2. ‚úÖ Image optimization (AVIF, WebP)
3. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (immutable –¥–ª—è –∞—Å—Å–µ—Ç–æ–≤)
4. ‚úÖ Tree-shaking –Ω–∞—Å—Ç—Ä–æ–µ–Ω
5. ‚úÖ Source maps –æ—Ç–∫–ª—é—á–µ–Ω—ã –≤ production
6. ‚úÖ Compression –≤–∫–ª—é—á—ë–Ω

---

## üéØ –ü–õ–ê–ù –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É)

### üî• –ö—Ä–∏—Ç–∏—á–Ω–æ (—Å–¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°) - —ç–∫–æ–Ω–æ–º–∏—è ~52 –ú–ë

#### 1. –£–¥–∞–ª–∏—Ç—å backup –ø–∞–ø–∫—É
```bash
rm -rf webapp/public/assets/backup
```
**–≠–∫–æ–Ω–æ–º–∏—è:** 51 –ú–ë
**–í—Ä–µ–º—è:** 1 –º–∏–Ω—É—Ç–∞

#### 2. –î–æ–±–∞–≤–∏—Ç—å font preloading
```tsx
// app/layout.tsx
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossOrigin="" />
```
**–≠—Ñ—Ñ–µ–∫—Ç:** –®—Ä–∏—Ñ—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ 300-500ms –±—ã—Å—Ç—Ä–µ–µ
**–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç

#### 3. Lazy load –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
```tsx
// –í–º–µ—Å—Ç–æ:
import { EnergyHistoryModal } from '@/components/EnergyHistoryModal'

// –î–µ–ª–∞—Ç—å:
const EnergyHistoryModal = dynamic(
  () => import('@/components/EnergyHistoryModal'),
  { ssr: false }
)
```
**–≠–∫–æ–Ω–æ–º–∏—è:** ~30 KB –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
**–í—Ä–µ–º—è:** 15 –º–∏–Ω—É—Ç

---

### üü° –í–∞–∂–Ω–æ (—Å–¥–µ–ª–∞—Ç—å –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ) - —É–ª—É—á—à–µ–Ω–∏–µ –Ω–∞ 20-30%

#### 4. –ú–µ–º–æ–∏–∑–∞—Ü–∏—è —Ç—è–∂—ë–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```tsx
// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —Å –±–æ–ª—å—à–∏–º–∏ —Å–ø–∏—Å–∫–∞–º–∏
export const RatingItem = memo(({ user }: Props) => {
  // ...
})
```
**–§–∞–π–ª—ã –¥–ª—è –º–µ–º–æ–∏–∑–∞—Ü–∏–∏:**
- `webapp/src/components/tabs/RatingsTab.tsx`
- `webapp/src/components/EnergyHistoryModal.tsx`
- `webapp/src/components/lessons/LessonRenderer.tsx`

**–≠—Ñ—Ñ–µ–∫—Ç:** –ú–µ–Ω—å—à–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤, –±–æ–ª–µ–µ –ø–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
**–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç

#### 5. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```tsx
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Next Image –≤–µ–∑–¥–µ
<Image
  src="/assets/bg-coins.jpg"
  alt=""
  width={400}
  height={300}
  quality={75}  // –±—ã–ª–æ 100
  priority     // —Ç–æ–ª—å–∫–æ –¥–ª—è first screen
/>
```
**–≠–∫–æ–Ω–æ–º–∏—è:** 30-50% —Ä–∞–∑–º–µ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
**–í—Ä–µ–º—è:** 20 –º–∏–Ω—É—Ç

#### 6. Bundle analyzer
```bash
npm install --save-dev @next/bundle-analyzer
```
```javascript
// next.config.ts
const withBundleAnalyzer = require('@next/bundle-analyzer')({
  enabled: process.env.ANALYZE === 'true',
})

module.exports = withBundleAnalyzer(nextConfig)
```
```bash
ANALYZE=true npm run build
```
**–≠—Ñ—Ñ–µ–∫—Ç:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —á—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –º–µ—Å—Ç–æ –≤ bundle
**–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç

---

### üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ (—Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü) - –ø–æ–ª–∏—Ä–æ–≤–∫–∞

#### 7. Prefetching –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
```tsx
// –í —Å–ø–∏—Å–∫–µ —É—Ä–æ–∫–æ–≤
<Link 
  href={`/course/${id}/lesson/${day}`}
  prefetch={true}  // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏ hover
>
```
**–≠—Ñ—Ñ–µ–∫—Ç:** –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
**–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç

#### 8. Virtualization –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
```bash
npm install @tanstack/react-virtual
```
```tsx
// –î–ª—è —Å–ø–∏—Å–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (–µ—Å–ª–∏ >50 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
import { useVirtualizer } from '@tanstack/react-virtual'
```
**–≠—Ñ—Ñ–µ–∫—Ç:** –†–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º–∞—è —á–∞—Å—Ç—å
**–í—Ä–µ–º—è:** 1 —á–∞—Å

#### 9. Service Worker –¥–ª—è offline
```bash
npm install next-pwa
```
**–≠—Ñ—Ñ–µ–∫—Ç:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç offline –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞

#### 10. –°–∂–∞—Ç–∏–µ API responses
```typescript
// backend/src/index.ts
import { compression } from '@elysiajs/compress'

app.use(compression())
```
**–≠—Ñ—Ñ–µ–∫—Ç:** API –æ—Ç–≤–µ—Ç—ã –Ω–∞ 70% –º–µ–Ω—å—à–µ
**–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç

---

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü–æ—Å–ª–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:
- **–†–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** 52 –ú–ë ‚Üí **1 –ú–ë** ‚ö°
- **First Load:** 263 KB ‚Üí **230 KB** ‚ö°
- **Time to Interactive:** 2-3s ‚Üí **1-1.5s** ‚ö°

### –ü–æ—Å–ª–µ –≤—Å–µ—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:
- **–†–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** **~800 KB** ‚ö°‚ö°
- **First Load:** **~180 KB** ‚ö°‚ö°
- **Time to Interactive:** **~0.5s** ‚ö°‚ö°
- **Lighthouse Score:** **95+** ‚ö°‚ö°

---

## üõ†Ô∏è –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ bundle:
```bash
npm run build && du -sh .next
```

### –ê–Ω–∞–ª–∏–∑ bundle:
```bash
ANALYZE=true npm run build
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
```bash
npm install --save-dev imagemin imagemin-webp
```

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

- [ ] –£–¥–∞–ª–∏—Ç—å backup –ø–∞–ø–∫—É (1 –º–∏–Ω)
- [ ] –î–æ–±–∞–≤–∏—Ç—å font preloading (5 –º–∏–Ω)
- [ ] Lazy load –º–æ–¥–∞–ª–æ–∫ (15 –º–∏–Ω)
- [ ] –ú–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–∫–∏ (30 –º–∏–Ω)
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Image –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (20 –º–∏–Ω)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å bundle analyzer (10 –º–∏–Ω)
- [ ] –î–æ–±–∞–≤–∏—Ç—å prefetching (10 –º–∏–Ω)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å virtualization (1 —á–∞—Å)
- [ ] –î–æ–±–∞–≤–∏—Ç—å service worker (2 —á–∞—Å–∞)
- [ ] –í–∫–ª—é—á–∏—Ç—å compression –Ω–∞ backend (5 –º–∏–Ω)

**–ò—Ç–æ–≥–æ:** ~5 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ 2-3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ

